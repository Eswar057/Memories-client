{"ast":null,"code":"import _regeneratorRuntime from\"D:\\\\project-memories\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"D:\\\\project-memories\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"D:\\\\project-memories\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useState,useRef}from\"react\";import{Typography,TextField,Button}from\"@material-ui/core/\";import{useDispatch}from\"react-redux\";import{commentPost}from\"../../actions/posts\";import useStyles from\"./styles\";var CommentSection=function CommentSection(_ref){var _user$result2;var post=_ref.post;var user=JSON.parse(localStorage.getItem(\"profile\"));var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),comment=_useState2[0],setComment=_useState2[1];var dispatch=useDispatch();var _useState3=useState(post===null||post===void 0?void 0:post.comments),_useState4=_slicedToArray(_useState3,2),comments=_useState4[0],setComments=_useState4[1];var classes=useStyles();var commentsRef=useRef();var handleComment=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _user$result;var newComments;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return dispatch(commentPost(\"\".concat(user===null||user===void 0?void 0:(_user$result=user.result)===null||_user$result===void 0?void 0:_user$result.name,\": \").concat(comment),post._id));case 2:newComments=_context.sent;setComment(\"\");setComments(newComments);commentsRef.current.scrollIntoView({behavior:\"smooth\"});case 6:case\"end\":return _context.stop();}}},_callee);}));return function handleComment(){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"div\",{className:classes.commentsOuterContainer},/*#__PURE__*/React.createElement(\"div\",{className:classes.commentsInnerContainer},/*#__PURE__*/React.createElement(Typography,{gutterBottom:true,variant:\"h6\"},\"Comments\"),comments===null||comments===void 0?void 0:comments.map(function(c,i){return/*#__PURE__*/React.createElement(Typography,{key:i,gutterBottom:true,variant:\"subtitle1\"},/*#__PURE__*/React.createElement(\"strong\",null,c.split(\": \")[0]),c.split(\":\")[1]);}),/*#__PURE__*/React.createElement(\"div\",{ref:commentsRef})),(user===null||user===void 0?void 0:(_user$result2=user.result)===null||_user$result2===void 0?void 0:_user$result2.name)&&/*#__PURE__*/React.createElement(\"div\",{style:{width:\"70%\"}},/*#__PURE__*/React.createElement(Typography,{gutterBottom:true,variant:\"h6\"},\"Write a comment\"),/*#__PURE__*/React.createElement(TextField,{fullWidth:true,rows:4,variant:\"outlined\",label:\"Comment\",multiline:true,value:comment,onChange:function onChange(e){return setComment(e.target.value);}}),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(Button,{style:{marginTop:\"10px\"},fullWidth:true,disabled:!comment.length,color:\"primary\",variant:\"contained\",onClick:handleComment},\"Comment\"))));};export default CommentSection;","map":{"version":3,"sources":["D:/project-memories/client/src/components/PostDetails/CommentSection.jsx"],"names":["React","useState","useRef","Typography","TextField","Button","useDispatch","commentPost","useStyles","CommentSection","post","user","JSON","parse","localStorage","getItem","comment","setComment","dispatch","comments","setComments","classes","commentsRef","handleComment","result","name","_id","newComments","current","scrollIntoView","behavior","commentsOuterContainer","commentsInnerContainer","map","c","i","split","width","e","target","value","marginTop","length"],"mappings":"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","sourcesContent":["import React, { useState, useRef } from \"react\";\nimport { Typography, TextField, Button } from \"@material-ui/core/\";\nimport { useDispatch } from \"react-redux\";\n\nimport { commentPost } from \"../../actions/posts\";\nimport useStyles from \"./styles\";\n\nconst CommentSection = ({ post }) => {\n  const user = JSON.parse(localStorage.getItem(\"profile\"));\n  const [comment, setComment] = useState(\"\");\n  const dispatch = useDispatch();\n  const [comments, setComments] = useState(post?.comments);\n  const classes = useStyles();\n  const commentsRef = useRef();\n\n  const handleComment = async () => {\n    const newComments = await dispatch(\n      commentPost(`${user?.result?.name}: ${comment}`, post._id)\n    );\n\n    setComment(\"\");\n    setComments(newComments);\n\n    commentsRef.current.scrollIntoView({ behavior: \"smooth\" });\n  };\n\n  return (\n    <div>\n      <div className={classes.commentsOuterContainer}>\n        <div className={classes.commentsInnerContainer}>\n          <Typography gutterBottom variant=\"h6\">\n            Comments\n          </Typography>\n          {comments?.map((c, i) => (\n            <Typography key={i} gutterBottom variant=\"subtitle1\">\n              <strong>{c.split(\": \")[0]}</strong>\n              {c.split(\":\")[1]}\n            </Typography>\n          ))}\n          <div ref={commentsRef} />\n        </div>\n        {user?.result?.name && (\n          <div style={{ width: \"70%\" }}>\n            <Typography gutterBottom variant=\"h6\">\n              Write a comment\n            </Typography>\n            <TextField\n              fullWidth\n              rows={4}\n              variant=\"outlined\"\n              label=\"Comment\"\n              multiline\n              value={comment}\n              onChange={(e) => setComment(e.target.value)}\n            />\n            <br />\n            <Button\n              style={{ marginTop: \"10px\" }}\n              fullWidth\n              disabled={!comment.length}\n              color=\"primary\"\n              variant=\"contained\"\n              onClick={handleComment}\n            >\n              Comment\n            </Button>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default CommentSection;\n"]},"metadata":{},"sourceType":"module"}